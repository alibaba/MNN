IF(MNN_BUILD_TEST)
  if(APPLE)
    file(GLOB_RECURSE Files ${CMAKE_CURRENT_LIST_DIR}/*.cpp ${CMAKE_CURRENT_LIST_DIR}/*.mm)
  else()
    file(GLOB_RECURSE Files ${CMAKE_CURRENT_LIST_DIR}/*.cpp)
  endif()
  add_executable(run_test.out ${Files})
  target_link_libraries(run_test.out ${MNN_DEPS})
  target_include_directories(run_test.out PRIVATE ${CMAKE_CURRENT_LIST_DIR}/)
  add_dependencies(run_test.out MNN_SCHEMA_GEN)
  if(APPLE)
      find_library(FOUNDATION Foundation REQUIRED)
      target_link_libraries(run_test.out ${FOUNDATION})
  endif()
  IF(WIN32 OR MSVC)
    target_compile_options(run_test.out PRIVATE /wd4244 /wd4267 /wd4305 /wd4251 /wd4065)
  ENDIF()
ENDIF()
